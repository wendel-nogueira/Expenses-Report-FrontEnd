<div
  class="h-full w-full flex items-center justify-center"
  style="background-color: #f2f2f2"
>
  <div
    class="flex flex-col py-4 px-6 bg-white shadow-md rounded-lg gap-8 w-min"
  >
    <div class="w-full">
      <h1 class="text-xl text-center font-bold text-blue-500 mb-2">
        Set new password
      </h1>
      <p class="text-center font-light text-slate-500">
        please enter your new password
      </p>
    </div>

    <div class="w-96">
      <div>
        <form class="flex flex-col gap-5">
          <mat-form-field>
            <mat-label>Password</mat-label>
            <input
              matInput
              [formControl]="passwordFormControl"
              [errorStateMatcher]="matcher"
              placeholder="Ex. 123456"
              minlength="6"
              maxlength="50"
              name="password"
              [type]="hidePassword ? 'password' : 'text'"
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'hidePassword password'"
              [attr.aria-pressed]="hidePassword"
            >
              <mat-icon>{{
                hidePassword ? 'visibility_off' : 'visibility'
              }}</mat-icon>
            </button>
            <mat-error
              *ngIf="
                passwordFormControl.hasError('minlength') ||
                passwordFormControl.hasError('maxlength')
              "
              class="font-normal text-xs mt-1"
            >
              Password must be between
              <strong class="font-bold">6</strong> and
              <strong class="font-bold">50</strong> characters
            </mat-error>
            <mat-error
              *ngIf="passwordFormControl.hasError('required')"
              class="font-normal text-xs mt-1"
            >
              Password is <strong class="font-bold">required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              [formControl]="confirmPasswordFormControl"
              [errorStateMatcher]="matcher"
              placeholder="Ex. 123456"
              minlength="6"
              maxlength="50"
              name="confirmPassword"
              [type]="hideConfirmPassword ? 'password' : 'text'"
              (change)="onConfirmPasswordChange()"
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hideConfirmPassword = !hideConfirmPassword"
              [attr.aria-label]="'hideConfirmPassword password'"
              [attr.aria-pressed]="hideConfirmPassword"
            >
              <mat-icon>{{
                hideConfirmPassword ? 'visibility_off' : 'visibility'
              }}</mat-icon>
            </button>
            <mat-error
              *ngIf="
                confirmPasswordFormControl.hasError('minlength') ||
                confirmPasswordFormControl.hasError('maxlength')
              "
              class="font-normal text-xs mt-1"
            >
              Confirm password must be between
              <strong class="font-bold">6</strong> and
              <strong class="font-bold">50</strong> characters
            </mat-error>
            <mat-error
              *ngIf="confirmPasswordFormControl.hasError('required')"
              class="font-normal text-xs mt-1"
            >
              Confirm password is <strong class="font-bold">required</strong>
            </mat-error>
            <mat-error
              *ngIf="
                !passwordFormControl.hasError('required') &&
                !confirmPasswordFormControl.hasError('minlength') &&
                !confirmPasswordFormControl.hasError('maxlength')
              "
              class="font-normal text-xs mt-1"
            >
              Confirm password must be the same as password
            </mat-error>
          </mat-form-field>

          <div class="flex items-center justify-center gap-8">
            <button
              mat-flat-button
              class="text-white rounded transition-colors mat-elevation-z2 flex justify-normal items-center py-2 px-6 mat-elevation-z2 
              {{
                !loading ? 'bg-green-400 hover:bg-green-500' : 'bg-gray-200'
              }}"
              type="submit"
              (click)="onSubmit()"
              [disabled]="loading"
            >
              <div class="h-6 w-full flex items-center justify-center">
                <span *ngIf="!loading">change password</span>
                <mat-spinner
                  *ngIf="loading"
                  diameter="20"
                  mode="indeterminate"
                ></mat-spinner>
              </div>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
